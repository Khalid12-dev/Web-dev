<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TO DO APP</title>

    <style>
        body{
            font-family: Arial, sans-serif;
            padding: 0;
            margin: 0;
            transition: 0.3s;
        }

        /* Navbar */
        .nav{
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 20px;
            background-color: aquamarine;
        }
        h2{
            color: brown;
            margin: 0;
        }
        #btn{
            border: none;
            background: none;
            font-size: 30px;
            cursor: pointer;
        }

        /* Add Task Section */
        .addTask{
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            padding: 20px;
        }
        input{
            width: 280px;
            height: 35px;
            padding-left: 15px;
            border: none;
            border-radius: 20px;
            background-color: lightgray;
            outline: none;
            font-size: 14px;
            box-shadow: 0px 0px 10px cyan;
        }
        input::placeholder{
            color: rgb(132, 70, 70);
            font-weight: bold;
        }

        button{
            width: 110px;
            height: 35px;
            border: none;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0px 0px 20px cyan;
            background-color: white;
        }

        /* Task List */
        #taskList{
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            padding: 20px;
            margin-top: 10px;
        }

        li{
            list-style: none;
            background-color: lightgray;
            width: 270px;
            min-height: 130px;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0px 0px 15px cyan;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .deleteBtn{
            background-color: crimson;
            color: white;
            font-size: 12px;
            height: 30px;
        }

        @media (max-width: 500px){
            li{ width: 90%; }
            input{ width: 90%; }
        }

    </style>
</head>
<body>
    
    <div class="nav">
        <h2>To Do App</h2>
        <button id="btn" onclick="Mode()">ðŸŒ™</button>
    </div>

    <div class="addTask">
        <input type="text" id="task" placeholder="Enter a Task">
        <button onclick="addTask()">Add Task</button>

        <input type="search" id="search" placeholder="Search Task">
        <button onclick="Search()">Search</button>
    </div>

    <ul id="taskList"></ul>

    <script>
        // Load tasks when page opens
        window.onload = function(){
            loadTasks();
        };

        // Add Task
        function addTask(){
            let task1 = document.getElementById("task").value.trim();
            if(task1 === ""){
                alert("Please enter a task");
                return;
            }

            saveTask(task1);
            showTasks();
            document.getElementById("task").value = "";
        }

        // Save to localStorage
        function saveTask(task){
            let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
            tasks.push(task);
            localStorage.setItem("tasks", JSON.stringify(tasks));
        }

        // Display Tasks
        function showTasks(){
            let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
            let list = document.getElementById("taskList");
            list.innerHTML = "";

            tasks.forEach((task, index) => {
                let li = document.createElement("li");
                
                let text = document.createElement("span");
                text.textContent = task;

                let delBtn = document.createElement("button");
                delBtn.textContent = "Delete";
                delBtn.className = "deleteBtn";

                delBtn.onclick = function(){
                    deleteTask(index);
                };

                li.appendChild(text);
                li.appendChild(delBtn);
                list.appendChild(li);
            });
        }

        // Delete Task
        function deleteTask(index){
            let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
            tasks.splice(index, 1);
            localStorage.setItem("tasks", JSON.stringify(tasks));
            showTasks();
        }

        // Load Tasks
        function loadTasks(){
            showTasks();
        }

        // Search Function
        function Search(){
            let searchValue = document.getElementById("search").value.toLowerCase();
            let items = document.querySelectorAll("#taskList li");

            items.forEach(li =>{
                let text = li.querySelector("span").textContent.toLowerCase();
                li.style.display = text.includes(searchValue) ? "flex" : "none";
            });
        }

        // Dark / Light Mode
        let theme = "light";
        function Mode(){
            if(theme === "light"){
                theme = "dark";
                document.body.style.backgroundColor = "black";
                document.body.style.color = "white";
                document.getElementById("btn").textContent = "â˜€";
                
                document.querySelectorAll("li").forEach(li=>{
                    li.style.backgroundColor = "#555";
                    li.style.color = "white";
                });

            } else {
                theme = "light";
                document.body.style.backgroundColor = "white";
                document.body.style.color = "black";
                document.getElementById("btn").textContent = "ðŸŒ™";

                document.querySelectorAll("li").forEach(li=>{
                    li.style.backgroundColor = "lightgray";
                    li.style.color = "black";
                });
            }
        }
    </script>

</body>
</html>
